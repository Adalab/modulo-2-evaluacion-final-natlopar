const g=document.querySelector(".js-input"),L=document.querySelector(".js-btnSearch"),f=document.querySelector(".js-containerFav"),v=document.querySelector(".js-containerRes"),j=document.querySelector(".js-removeFav"),A=document.querySelector(".js-reset");let l="",a=[],n=[];function C(e){e.preventDefault();const t=g.value.toLowerCase();fetch(`https://api.jikan.moe/v4/anime?q=${t}`).then(i=>i.json()).then(i=>{a=i.data,r(a,v)})}function r(e,t){t.innerHTML="";const i=JSON.parse(localStorage.getItem("series"));for(const s of e){const S=document.createTextNode(s.title);let o=s.images.jpg.image_url;o==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"&&(o="https://placehold.co/210x295?text=NoImageFound");const d=document.createElement("li"),c=document.createElement("article"),u=document.createElement("img"),p=document.createElement("h3"),m=document.createElement("i");if(c.appendChild(m),m.setAttribute("class","fa-solid fa-circle-xmark js-btnRemove card__btn"),m.setAttribute("id",s.mal_id),u.setAttribute("src",o),u.setAttribute("class","card__img"),u.setAttribute("alt","imagen anime"),c.appendChild(u),t.appendChild(d),d.setAttribute("class","list"),d.appendChild(c),p.setAttribute("class","card__title"),p.appendChild(S),c.setAttribute("id",s.mal_id),c.setAttribute("class","js-article card"),c.appendChild(p),t===v){if(d.classList.add("js-liResult"),c.removeChild(m),i)for(const R of i)parseInt(c.id)===R.mal_id&&c.classList.add("favorite");t.appendChild(d)}y(),I()}}function I(){const e=document.querySelectorAll(".js-btnRemove");for(const t of e)t.addEventListener("click",F)}function y(){const e=document.querySelectorAll(".js-article");for(const t of e)t.addEventListener("click",k)}function k(e){l=e.currentTarget,l.classList.contains("favorite")?E():_()}function E(e){l.classList.remove("favorite");const t=l.id;h(t)}function _(e){if(l.parentElement.classList.contains("js-liResult")){l.classList.add("favorite");const i=l.id,s=a.find(o=>parseInt(i)===o.mal_id);n.findIndex(o=>o.mal_id===parseInt(i))===-1&&n.push(s)}r(n,f),localStorage.setItem("series",JSON.stringify(n))}function F(e){console.log("click");const t=e.currentTarget,i=t.parentElement,s=t.id;h(s),q(i)}function q(e){const t=document.querySelectorAll(".js-article");for(const i of t){const s=i.id;e.id===s&&i.classList.remove("favorite")}}function h(e){const t=n.findIndex(i=>i.mal_id===parseInt(e));n.splice(t,1),localStorage.setItem("series",JSON.stringify(n)),r(n,f)}L.addEventListener("click",C);function x(){const e=JSON.parse(localStorage.getItem("series"));e&&(n=e,r(n,f))}x();function b(){n=[],localStorage.setItem("series",JSON.stringify(n)),r(n,f),r(a,v)}j.addEventListener("click",b);function N(e){e.preventDefault(),b(),a=[],g.value="",r(a,v)}A.addEventListener("click",N);
//# sourceMappingURL=main.js.map
