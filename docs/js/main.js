const g=document.querySelector(".js-input"),j=document.querySelector(".js-btnSearch"),f=document.querySelector(".js-containerFav"),v=document.querySelector(".js-containerRes"),A=document.querySelector(".js-removeFav"),C=document.querySelector(".js-reset");let r="",a=[],i=[];function I(e){e.preventDefault();const t=g.value.toLowerCase();fetch(`https://api.jikan.moe/v4/anime?q=${t}`).then(n=>n.json()).then(n=>{a=n.data,l(a,v)})}function l(e,t){t.innerHTML="";const n=JSON.parse(localStorage.getItem("series"));for(const s of e){const S=document.createTextNode(s.title);let o=s.images.jpg.image_url;o==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"&&(o="https://placehold.co/210x295?text=NoImageFound");const d=document.createElement("li"),c=document.createElement("article"),u=document.createElement("img"),p=document.createElement("h3"),m=document.createElement("i");if(c.appendChild(m),m.setAttribute("class","fa-solid fa-circle-xmark js-btnRemove card__btn"),m.setAttribute("id",s.mal_id),u.setAttribute("src",o),u.setAttribute("class","card__img"),u.setAttribute("alt","imagen anime"),c.appendChild(u),t.appendChild(d),d.appendChild(c),p.setAttribute("class","card__title"),p.appendChild(S),c.setAttribute("id",s.mal_id),c.setAttribute("class","js-article card"),c.appendChild(p),t===v){if(d.setAttribute("class","js-liResult list"),c.removeChild(m),n)for(const R of n)parseInt(c.id)===R.mal_id&&c.classList.add("favorite");t.appendChild(d)}y(),L()}}function L(){const e=document.querySelectorAll(".js-btnRemove");for(const t of e)t.addEventListener("click",F)}function y(){const e=document.querySelectorAll(".js-article");for(const t of e)t.addEventListener("click",E)}function E(e){r=e.currentTarget,r.classList.contains("favorite")?_():k()}function _(e){r.classList.remove("favorite");const t=r.id;h(t)}function k(e){if(r.parentElement.classList.contains("js-liResult")){r.classList.add("favorite");const n=r.id,s=a.find(o=>parseInt(n)===o.mal_id);i.findIndex(o=>o.mal_id===parseInt(n))===-1&&i.push(s)}l(i,f),localStorage.setItem("series",JSON.stringify(i))}function F(e){const t=e.currentTarget,n=t.parentElement,s=t.id;h(s),q(n)}function q(e){const t=document.querySelectorAll(".js-article");for(const n of t){const s=n.id;e.id===s&&n.classList.remove("favorite")}}function h(e){const t=i.findIndex(n=>n.mal_id===parseInt(e));i.splice(t,1),localStorage.setItem("series",JSON.stringify(i)),l(i,f)}j.addEventListener("click",I);function x(){const e=JSON.parse(localStorage.getItem("series"));e&&l(e,f)}x();function b(){i=[],localStorage.setItem("series",JSON.stringify(i)),l(i,f),l(a,v)}A.addEventListener("click",b);function N(e){e.preventDefault(),b(),a=[],g.value="",l(a,v)}C.addEventListener("click",N);
//# sourceMappingURL=main.js.map
